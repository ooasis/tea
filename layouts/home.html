{{- define "main" -}}

<div class="flex flex-col gap-10 md:flex-row md:gap-12">
  <!-- Left: main home content -->
  <div class="min-w-0 md:w-2/3">
    {{- if .Content -}}
    {{- .Content -}}
    {{- end -}}
  </div>

  <!-- Right: latest content (top 10, no pagination) -->
  <aside class="not-prose md:w-1/3">
    <div class="sticky top-6">
      <div class="mb-4 text-sm tracking-wide opacity-70">Latest</div>

      {{- $candidates := where site.Pages "Kind" "in" (slice "section" "page") -}}
      {{- $candidates = where $candidates "RelPermalink" "ne" "/" -}}
      {{- $latest := first 10 ($candidates.ByDate.Reverse) -}}

      <div class="flex flex-col gap-3">
        {{- range $latest -}}
        <a
          class="rounded-lg bg-black/[3%] px-4 py-3 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
          href="{{- .RelPermalink -}}"
        >
          <div class="text-sm font-medium leading-snug">{{- .Title -}}</div>
          {{- if .Date -}}
          <div class="mt-1 text-xs opacity-60">{{- .Date | time.Format ":date_medium" -}}</div>
          {{- end -}}
        </a>
        {{- end -}}
      </div>
    </div>
  </aside>
</div>

{{- end -}}

