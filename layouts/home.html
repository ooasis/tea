{{- define "main" -}}

<div class="home-layout">
  <!-- Left: main home content -->
  <div class="home-main">
    {{- if .Content -}}
    {{- .Content -}}
    {{- end -}}
  </div>

  <!-- Right: latest content (top 10, no pagination) -->
  <aside class="home-sidebar not-prose">
    <div class="home-sidebar-inner">
      <h2 class="home-latest-title">Latest</h2>

      {{- $candidates := where site.Pages "Kind" "in" (slice "section" "page") -}}
      {{- $candidates = where $candidates "RelPermalink" "ne" "/" -}}
      {{- $latest := first 10 ($candidates.ByDate.Reverse) -}}

      <div class="home-latest-list">
        {{- range $latest -}}
        <a
          class="home-latest-item"
          href="{{- .RelPermalink -}}"
        >
          <div class="home-latest-item-title">{{- .Title -}}</div>
          {{- if .Date -}}
          <div class="home-latest-item-date">{{- .Date | time.Format ":date_medium" -}}</div>
          {{- end -}}
        </a>
        {{- end -}}
      </div>
    </div>
  </aside>
</div>

{{- end -}}

